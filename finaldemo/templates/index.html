<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>智能助教系统</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="logo">
        <i class="fa fa-graduation-cap"></i>
        <h1>智能助教系统</h1>
      </div>
    </div>
  </header>

  <main class="main">
    <section class="hero">
      <div class="container">
        <h2>智能知识图谱生成系统</h2>
        <p>上传学习资料，自动生成知识图谱，提升学习效率</p>
      </div>
    </section>

    <section class="upload-section">
      <div class="container">
        <div id="uploadContainer">
          <div class="upload-area">
            <i class="fa fa-cloud-upload"></i>
            <h3>上传学习资料</h3>
            <p>支持PPT、PDF、Word、TXT格式</p>
            <label for="fileInput" class="upload-btn">
              <i class="fa fa-file-text-o"></i>选择文件
              <input id="fileInput" type="file" accept=".ppt,.pptx,.pdf,.docx,.doc,.txt">
            </label>
          </div>
        </div>

        <div id="progressContainer" class="hidden">
          <div class="progress-card">
            <div class="progress-header">
              <h3>正在处理文档</h3>
              <span id="progressPercentage">0%</span>
            </div>
            <div class="progress-bar">
              <div id="progressBar"></div>
            </div>
            <div class="progress-message">
              <i class="fa fa-spinner fa-spin"></i>
              <p id="progressMessage">准备处理文档...</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 在graph-section部分添加节点控制UI -->
<section class="graph-section">
  <div id="graphContainer" class="hidden">
    <div class="graph-header">
      <h3>知识图谱</h3>
      <div class="graph-controls">
        <div class="search-box">
          <i class="fa fa-search"></i>
          <input type="text" id="searchNode" placeholder="搜索知识点...">
        </div>
        
        <!-- 节点控制按钮 -->
        <div class="node-controls">
          <button id="ignoreNodeBtn" class="control-btn">
            <i class="fa fa-eye-slash"></i> 忽略选中节点
          </button>
          <button id="resetIgnoredBtn" class="control-btn">
            <i class="fa fa-eye"></i> 重置忽略
          </button>
        </div>
        
        <button id="refreshGraph">
          <i class="fa fa-refresh"></i>
        </button>
      </div>
    </div>
    
    <!-- 节点大小过滤 -->
    <div class="node-filter">
      <div class="filter-control">
        <label for="nodeSizeSlider">节点大小过滤:</label>
        <input type="range" id="nodeSizeSlider" min="0" max="10" value="0">
        <span id="nodeSizeValue">0</span>
        <button id="applySizeFilter">应用过滤</button>
      </div>
    </div>
    
    <div id="networkContainer"></div>
    
    <div class="graph-footer">
      <div class="legend">
        <div class="legend-item">
          <span class="color mastered"></span>
          <span>已掌握</span>
        </div>
        <div class="legend-item">
          <span class="color partial"></span>
          <span>部分掌握</span>
        </div>
        <div class="legend-item">
          <span class="color unmastered"></span>
          <span>未掌握</span>
        </div>
      </div>
      <div class="stats">
        <span id="nodeCount">0</span> 个节点 | <span id="edgeCount">0</span> 条关系
      </div>
    </div>
  </div>
</section>

    <section class="quiz-section">
      <div id="quizContainer" class="hidden">
        <div class="quiz-header">
          <h3>知识测试</h3>
          <p>回答问题，巩固你的理解</p>
        </div>
        <div class="quiz-body">
          <div id="questionCard" class="hidden">
            <div class="question-box">
              <h4>问题</h4>
              <p id="currentQuestion"></p>
            </div>
            <div class="answer-box">
              <h4>你的回答</h4>
              <textarea id="userAnswer" placeholder="请输入你的回答..."></textarea>
            </div>
            <button id="submitAnswer">提交答案</button>
          </div>
          
          <div id="answerFeedback" class="hidden">
            <div class="feedback-box" id="feedbackCard">
              <h4 id="feedbackTitle"></h4>
              <p id="feedbackText"></p>
            </div>
            <button id="nextQuestion">下一个问题</button>
          </div>
          
          <div id="noQuestion">
            <i class="fa fa-question-circle"></i>
            <h4>请先选择一个知识点</h4>
            <p>在知识图谱中点击一个节点，开始测试</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>© 2025 智能助教系统 | 知识图谱学习平台</p>
    </div>
  </footer>

  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>